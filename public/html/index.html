<!doctype html>
<html ng-app="app">
  <head>
    <title>Twitter Stream</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="/javascripts/lib/jquery-2.1.1.min.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script type="text/javascript" src="/javascripts/lib/angular.js"></script>
    <script type="text/javascript" src="/javascripts/lib/angular-animate.js"></script>
    <script type="text/javascript" src="/javascripts/lib/angular_touch.js"></script>
    <script type="text/javascript" src="/javascripts/lib/angular-route.js"></script>
     <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?sensor=SET_TO_TRUE_OR_FALSE">
    </script>
    <script type="text/javascript" src="/javascripts/app.js"></script>
     <script type="text/javascript" src="/javascripts/StreamService.js"></script>
     <script type="text/javascript" src="/javascripts/UnLoadService.js"></script>
    <script type="text/javascript" src="/javascripts/streamController.js"></script>
    <script type="text/javascript" src="/javascripts/map.Directive.js"></script>
  </head>
  <body ng-controller = "streamController as stream">    
    <!--<div id = "map-canvas" style = "width: 500px; height: 500px;"></div>-->
    <map coords = "stream.coords" updatecoords='stream.updateCoords'> </map>
      <div class = "instructions-toggle" ng-click = "stream.toggleInstructions()">
        <img ng-src = "../images/{{stream.toggleImage}}" alt = "close">
      </div>
      <div class = "instructions-overlay cf" ng-show = "stream.showInstructions">
        <h1>
          Tweet Streamer
        </h1>
        <p class = "lead">
          Stream tweets by location and the words they contain.
        </p>
        <ol>
          <li>
            Move the box to change where the tweets come from.
          </li>
          <li>
            Enter the terms the tweets should include, seperated by spaces.
          </li>
        </ol>
      </div>
      <div class = "tweets-overlay cf">
      <div class = "search-terms">
        <span ng-repeat-start = "term in stream.searchTermArray">
          {{term}}
        </span>
        <span ng-repeat-end ng-show = 'stream.notOnlyWord() && stream.notLastWord($index)'>
          {{stream.searchTermDivider}}
        </span>
         
      </div>
     
      <form id="" name = "locationform" class = "location-form cf" ng-submit = "stream.createStream(stream.coords, stream.searchTerms, stream.exclusiveSearch, stream.userNumber)" novalidate>
         <div class = "form-group">
          <label for="email" class="pull-left">Search Terms</label>

          <input type="" class = "form-control"  placeholder = "Email" name="email" ng-model = "stream.searchTerms" >
        </div>
        <div class = "radio-instructions">
          Stream tweets that contain:
        </div>
        <label for = "all"> 
          all of the search terms
        </label>
        <input type = "radio" ng-model = "stream.exclusiveSearch" name = "all" ng-value = "true"> 
        <label for = "any"> 
          any of the search terms
        </label>
        <input type = "radio" ng-model = "stream.exclusiveSearch" name = "any" ng-value = "false"> 
        <button class = "btn btn-primary col-xs-12">{{stream.buttonText}}</button>
      </form>
    <div class = "error" ng-show = "stream.noSearchTermError"> Sorry, but you have to track at least one word. House rules.</div>
    <div class = "error" ng-show = "stream.serverError">Our bad, something broke. Mind refreshing and trying again?</div>
     <ul class = "tweets cf">
      <li ng-repeat = "tweet in tweets = (stream.tweets)">
        {{tweet.user}}: {{tweet.text}}
      </li>
    </ul>
  </div><!--overlay-->


  </body>
</html>
